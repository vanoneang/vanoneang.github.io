(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{345:function(t,e,s){t.exports=s.p+"assets/img/javascript-execution-process.adf5e9ad.jpg"},346:function(t,e,s){t.exports=s.p+"assets/img/lexical-code.c05fad01.png"},347:function(t,e,s){t.exports=s.p+"assets/img/execution-context.783cc88c.png"},348:function(t,e,s){t.exports=s.p+"assets/img/function.ad73a1e1.jpg"},503:function(t,e,s){"use strict";s.r(e);var n=s(10),a=Object(n.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"scope-chain-and-this"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scope-chain-and-this"}},[t._v("#")]),t._v(" Scope Chain and this")]),t._v(" "),e("p",[t._v("JavaScript scope refers to the range of variables that can be accessed. There are three types Global scope, Function scope and Block scope.")]),t._v(" "),e("p",[t._v("A piece of JavaScript code needs to be compiled by the JavaScript engine before it is executed. After the compilation is completed, it will enter the execution phase.")]),t._v(" "),e("img",{attrs:{src:s(345)}}),t._v(" "),e("p",[t._v("On the basis of these, let's talk about what a scope chain is today.")]),t._v(" "),e("h2",{attrs:{id:"scope-chain"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scope-chain"}},[t._v("#")]),t._v(" scope chain")]),t._v(" "),e("p",[t._v("First let's look at the following code:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scope"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" scope "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"function"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" scope "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"global"')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("What do you think the bar function and foo function print out in this code? This will analyze the execution flow of these two pieces of code.")]),t._v(" "),e("p",[t._v("Regarding scope chaining, many people will find it confusing, but if you understand the concepts of "),e("strong",[t._v("call stack, execution context, lexical environment, variable environment")]),t._v(", etc., then you will understand the scope chain very easily.")]),t._v(" "),e("p",[t._v("In fact, in the variable environment of each execution context, an external reference is included to point to the external execution context. We call this external reference "),e("strong",[t._v("outer")]),t._v(" .")]),t._v(" "),e("p",[t._v("For example, when the above code is looking for the "),e("code",[t._v("scope")]),t._v(" variable, if it is not found in the current variable environment, the JavaScript engine will continue to search in the execution context pointed to by outer. We call this chain of lookups the "),e("strong",[t._v("scope chain")]),t._v(".")]),t._v(" "),e("p",[t._v("Now you know that variables are searched through the scope chain, but there is still a question that has not been solved, the bar function called by the foo function, then why the external reference of the bar function is the global execution context, not the execution context of the foo function?")]),t._v(" "),e("p",[t._v("To answer this question, you also need to know what lexical scope is . This is because during JavaScript execution, its scope chain is determined by "),e("strong",[t._v("lexical scoping")]),t._v(".")]),t._v(" "),e("h2",{attrs:{id:"lexical-scope"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lexical-scope"}},[t._v("#")]),t._v(" lexical scope")]),t._v(" "),e("p",[e("strong",[t._v("Lexical scope means that the scope is determined by the position of the function declaration in the code, so the lexical scope is a static scope, which can predict how the code looks for the identifier during the execution process.")])]),t._v(" "),e("p",[t._v("This may not be easy to understand, let's look at the following picture:")]),t._v(" "),e("img",{attrs:{src:s(346)}}),t._v(" "),e("p",[t._v("Because the JavaScript scope chain is determined by the lexical scope, the entire order of the lexical scope chain is: foo function scope -> bar function scope -> main function scope -> global scope.")]),t._v(" "),e("p",[t._v("That is to say, the "),e("strong",[t._v("lexical scope is determined at the compilation stage of the code, and has nothing to do with how the function is called")]),t._v(".")]),t._v(" "),e("p",[t._v("All in all, the scope chain of the JavaScript language is determined by lexical scoping, which is determined by "),e("strong",[t._v("code structure( or position)")]),t._v(".")]),t._v(" "),e("h2",{attrs:{id:"this"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#this"}},[t._v("#")]),t._v(" this")]),t._v(" "),e("p",[t._v("We need to distinguish the "),e("strong",[t._v("scope chain")]),t._v(" and "),e("strong",[t._v("this")]),t._v(" are two different systems, and there is not much connection between them.")]),t._v(" "),e("img",{attrs:{src:s(347)}}),t._v(" "),e("p",[t._v("As can be seen from the figure, "),e("code",[t._v("this")]),t._v(" is bound to the execution context , that is to say, there is a "),e("code",[t._v("this")]),t._v(" "),e("strong",[t._v("in each execution context")]),t._v(".")]),t._v(" "),e("p",[t._v("The execution context is mainly divided into three types - the global execution context, the function execution context and the eval execution context, so the corresponding "),e("code",[t._v("this")]),t._v(" is only these three - "),e("strong",[e("code",[t._v("this")]),t._v(" in the global execution context, "),e("code",[t._v("this")]),t._v(" in the function execution context and "),e("s",[e("code",[t._v("this")]),t._v(" in eval execution context")])]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"this-in-the-global-execution-context"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#this-in-the-global-execution-context"}},[t._v("#")]),t._v(" "),e("code",[t._v("this")]),t._v(" in the global execution context")]),t._v(" "),e("p",[t._v("You can type "),e("code",[t._v("console.log(this)")]),t._v(" in the console to print out this in the global execution context, and the final output is the "),e("code",[t._v("window object")]),t._v(". So we can come to the conclusion that "),e("code",[t._v("this")]),t._v(" in the global execution context refers to the window object. "),e("strong",[t._v("This is also the only point of intersection between "),e("code",[t._v("this")]),t._v(" and the "),e("code",[t._v("scope chain")]),t._v(".")])]),t._v(" "),e("h3",{attrs:{id:"this-in-the-function-execution-context"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#this-in-the-function-execution-context"}},[t._v("#")]),t._v(" "),e("code",[t._v("this")]),t._v(" in the function execution context")]),t._v(" "),e("p",[t._v("Let's look at the following code:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("We print out the "),e("code",[t._v("this")]),t._v(" value inside the foo function, execute this code, and the window object is also printed out, which means that "),e("strong",[t._v("when a function is called by default")]),t._v(", the this in its execution context also points to the "),e("strong",[t._v("window object")]),t._v(".")]),t._v(" "),e("p",[t._v("Can we set this in the execution context to point to "),e("strong",[t._v("other objects")]),t._v("? The answer is yes. In general, there are three ways to set the this value in the function execution context.")]),t._v(" "),e("p",[e("strong",[t._v("1. Set by call method of the function")])]),t._v(" "),e("img",{attrs:{src:s(348)}}),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" protagonist "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("firstName")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Sherlock'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("lastName")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Holmes'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getFullName")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstName "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("' '")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastName"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("story")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("interest"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hobby")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFullName")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("' loves '")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" interest "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("' and '")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" hobby"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("story")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("protagonist"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'reasoning'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'algorithm'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// story.apply(protagonist,['reasoning', 'algorithm']); ")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const tellStory = story.bind(protagonist)")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// tellStory('reasoning', 'algorithm')")]),t._v("\n")])])]),e("p",[t._v("The "),e("code",[t._v("call()")]),t._v(" method calls a function with a given "),e("code",[t._v("this")]),t._v(" value and arguments provided individually.")]),t._v(" "),e("p",[e("strong",[t._v("2. Set the method by calling the object")])]),t._v(" "),e("p",[t._v("To change the this pointer in the function execution context, in addition to the call method of the function, we can also call it through the object, such as the following code:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" protagonist "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("firstName")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Sherlock'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("lastName")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Holmes'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getFullName")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nprotagonist"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFullName")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("So, we can come to the conclusion: use the object to call a method inside it, and the this of the method points to the object itself.")]),t._v(" "),e("p",[t._v("Let's do a little change:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" protagonist "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("firstName")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Sherlock'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("lastName")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Holmes'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getFullName")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fn "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" protagonist"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getFullName\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("Execute this code, we will find that "),e("code",[t._v("this")]),t._v(" again points to the global window object.")]),t._v(" "),e("p",[t._v("So by comparing the above two examples, we can draw the following two conclusions:")]),t._v(" "),e("ul",[e("li",[t._v("When calling a function in the global environment, the "),e("code",[t._v("this")]),t._v(" inside the function points to the global variable window.")]),t._v(" "),e("li",[t._v("Calling a method inside of an object whose this in the execution context of the method points to the object itself.")])]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[t._v("Set by the constructor")])]),t._v(" "),e("p",[t._v("We can set "),e("code",[t._v("this")]),t._v(" in the constructor like this, as in the sample code below:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateObj")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"E"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" instance "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CreateObj")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("In fact, when executing "),e("code",[t._v("new CreateObj()")]),t._v(", the JavaScript engine does the following four things:")]),t._v(" "),e("ul",[e("li",[t._v("First create an empty object "),e("code",[t._v("instance")]),t._v(";")]),t._v(" "),e("li",[t._v("Then call the "),e("code",[t._v("CreateObj.call")]),t._v(" method and use "),e("code",[t._v("instance")]),t._v(" as the parameter of the call method, so that when the execution context of "),e("code",[t._v("CreateObj")]),t._v(" is created, its this points to the "),e("code",[t._v("instance")]),t._v(" object;")]),t._v(" "),e("li",[e("strong",[t._v("Then execute the "),e("code",[t._v("CreateObj")]),t._v(" function")]),t._v(". At this time, the "),e("code",[t._v("this")]),t._v(" in the execution context of the "),e("code",[t._v("CreateObj")]),t._v(" function points to the "),e("code",[t._v("instance")]),t._v(" object;")]),t._v(" "),e("li",[t._v("Finally, the "),e("code",[t._v("instance")]),t._v(" object is returned.")])]),t._v(" "),e("p",[t._v("For better understanding, we can use code to demonstrate:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" instance "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateObj")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" instance\n")])])]),e("p",[t._v("In this way, we have constructed a new object through the "),e("code",[t._v("new")]),t._v(" keyword, and "),e("code",[t._v("this")]),t._v(" in the constructor is actually the new object itself.")]),t._v(" "),e("h2",{attrs:{id:"summarize"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#summarize"}},[t._v("#")]),t._v(" Summarize")]),t._v(" "),e("p",[t._v("The "),e("strong",[t._v("scope chain")]),t._v(" and "),e("strong",[t._v("this")]),t._v(" are two different systems, and there is not much connection between them. The only intersection between this and the scope chain is that, in some cases, they both point to the window object.")]),t._v(" "),e("p",[t._v("The scope chain is determined by lexical scoping, which is determined by code structure( or position). But "),e("code",[t._v("this")]),t._v(" is bound to the execution context.")]),t._v(" "),e("p",[t._v("If you feel that "),e("code",[t._v("this")]),t._v(" of some cases is not easy to identify, We can use "),e("code",[t._v("const self = this")]),t._v(" to "),e("strong",[t._v("convert "),e("code",[t._v("this")]),t._v(" system into a scope system")]),t._v(".")])])}),[],!1,null,null,null);e.default=a.exports}}]);