(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{297:function(t,s,e){},432:function(t,s,e){"use strict";e(297)},549:function(t,s,e){"use strict";e.r(s);e(432);var a=e(10),n=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"how-to-install-postgresql-via-macports-on-osx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#how-to-install-postgresql-via-macports-on-osx"}},[t._v("#")]),t._v(" How to install PostgreSQL via MacPorts on OSX")]),t._v(" "),s("div",{staticClass:"custom"},[s("p",[t._v("In order to install PostgreSQL on OSX, you need to know which versions are currently supported.")]),t._v(" "),s("p",[t._v("Use this command to see what versions you have available.")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" port list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^postgresql[[:digit:]]\\{2\\}[[:space:]]"')]),t._v("\n")])])]),s("p",[t._v("You should get a list that looks like the following:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("postgresql10                   @10.14          databases/postgresql10\npostgresql11                   @11.9           databases/postgresql11\npostgresql12                   @12.4           databases/postgresql12\npostgresql13                   @13.1           databases/postgresql13\npostgresql80                   @8.0.26         databases/postgresql80\npostgresql81                   @8.1.23         databases/postgresql81\npostgresql82                   @8.2.23         databases/postgresql82\npostgresql83                   @8.3.23         databases/postgresql83\npostgresql84                   @8.4.22         databases/postgresql84\npostgresql90                   @9.0.23         databases/postgresql90\npostgresql91                   @9.1.24         databases/postgresql91\npostgresql92                   @9.2.24         databases/postgresql92\npostgresql93                   @9.3.25         databases/postgresql93\npostgresql94                   @9.4.26         databases/postgresql94\npostgresql95                   @9.5.23         databases/postgresql95\npostgresql96                   @9.6.19         databases/postgresql96\n")])])]),s("p",[t._v("Today, I'm going to use the version of 12.4.")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" port "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" postgresql12-server postgresql12\n")])])]),s("p",[t._v("We can see the installation log like this:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(" Some of the ports you installed have notes:\n  apache2 has the following notes:\n    For information about configuring Apache2, see\n    https://trac.macports.org/wiki/howto/Apache2\n\n    A startup item has been generated that will aid in starting apache2 with\n    launchd. It is disabled by default. Execute the following command to start\n    it, and to cause it to launch at startup:\n\n        sudo port load apache2\n  libidn has the following notes:\n    Please be aware that GNU libidn2 is the successor of GNU libidn. It comes\n    with IDNA 2008\n    and TR46 implementations and also provides a compatibility layer for GNU\n    libidn.\n  libpsl has the following notes:\n    libpsl API documentation is provided by the port 'libpsl-docs'.\n  mariadb-10.1 has the following notes:\n    On activation if no /opt/local/etc/mariadb-10.1/my.cnf file exists one\n    will be created which loads\n    /opt/local/etc/mariadb-10.1/macports-default.cnf.\n\n    If a /opt/local/etc/mariadb-10.1/my.cnf file exists MacPorts does not\n    touch it and any changes you make to /opt/local/etc/mariadb-10.1/my.cnf\n    will be preserved (e.g., during port upgrades, deactivations or\n    activations). /opt/local/etc/mariadb-10.1/my.cnf is a good place to\n    customize your mariadb-10.1 installation.\n\n    Any changes made to /opt/local/etc/mariadb-10.1/macports-default.cnf\n    will be lost during port upgrades, deactivations or activations so you\n    are advised to not make changes here. Currently\n    /opt/local/etc/mariadb-10.1/macports-default.cnf contains only one\n    directive; to disable networking. With disabled networking it is\n    possible to install and have running all the MacPorts mysql ports\n    simultaneously.\n  nginx has the following notes:\n    A set of sample configuration files has been installed in\n    /opt/local/share/nginx/examples.\n\n    Additionally, the files nginx.conf, mime.types, fastcgi.conf have been\n    copied to /opt/local/etc/nginx if they didn't exist yet.\n    Adjust these files to your needs before starting nginx.\n\n    A startup item has been generated that will aid in starting nginx with\n    launchd. It is disabled by default. Execute the following command to start\n    it, and to cause it to launch at startup:\n\n        sudo port load nginx\n  postgresql12 has the following notes:\n    To use the postgresql server, install the postgresql12-server port\n  postgresql12-server has the following notes:\n    To create a database instance, after install do\n     sudo mkdir -p /opt/local/var/db/postgresql12/defaultdb\n     sudo chown postgres:postgres /opt/local/var/db/postgresql12/defaultdb\n     sudo su postgres -c 'cd /opt/local/var/db/postgresql12 &&\n    /opt/local/lib/postgresql12/bin/initdb -D\n    /opt/local/var/db/postgresql12/defaultdb'\n\n    A startup item has been generated that will aid in starting\n    postgresql12-server with launchd. It is disabled by default. Execute the\n    following command to start it, and to cause it to launch at startup:\n\n        sudo port load postgresql12-server\n  python27 has the following notes:\n    To make this the default Python or Python 2 (i.e., the version run by the\n    'python' or 'python2' commands), run one or both of:\n\n        sudo port select --set python python27\n        sudo port select --set python2 python27\n  python37 has the following notes:\n    To make this the default Python or Python 3 (i.e., the version run by the\n    'python' or 'python3' commands), run one or both of:\n\n        sudo port select --set python python37\n        sudo port select --set python3 python37\n  python38 has the following notes:\n    To make this the default Python or Python 3 (i.e., the version run by the\n    'python' or 'python3' commands), run one or both of:\n\n        sudo port select --set python python38\n        sudo port select --set python3 python38\n  rsync has the following notes:\n    To use the rsyncd server you must copy /opt/local/etc/rsyncd.conf.example to\n    rsyncd.conf and add your modules there. See 'man rsyncd.conf' for more\n    information.\n\n    A startup item has been generated that will aid in starting rsync with\n    launchd. It is disabled by default. Execute the following command to start\n    it, and to cause it to launch at startup:\n\n        sudo port load rsync\n")])])]),s("p",[t._v("Here is the key message:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo mkdir -p /opt/local/var/db/postgresql12/defaultdb\nsudo chown postgres:postgres /opt/local/var/db/postgresql12/defaultdb\nsudo su postgres -c 'cd /opt/local/var/db/postgresql12 && /opt/local/lib/postgresql12/bin/initdb -D /opt/local/var/db/postgresql12/defaultdb'\n")])])]),s("p",[t._v('The files belonging to this database system will be owned by user "postgres".This user must also own the server process.')]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("fixing permissions on existing directory /opt/local/var/db/postgresql12/defaultdb ... ok\ncreating subdirectories ... ok\nselecting dynamic shared memory implementation ... posix\nselecting default max_connections ... 100\nselecting default shared_buffers ... 128MB\nselecting default time zone ... Asia/Shanghai\ncreating configuration files ... ok\nrunning bootstrap script ... ok\nperforming post-bootstrap initialization ... ok\nsyncing data to disk ... ok\n")])])]),s("p",[t._v("All the databases installed via MacPorts are located in the following position.")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("ls /opt/local/var/db\nmariadb-10.1 mongodb      php71        postgresql12 redis\n")])])]),s("p",[t._v("Now we start the server:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo port load postgresql12-server\n")])])]),s("p",[t._v("Use ps command to check the process:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("ps -ef | grep postgres\n")])])]),s("p",[t._v("To use the "),s("code",[t._v("psql")]),t._v(" command we should set the environment path.")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("vi ~/.profile\nexport PATH=/opt/local/lib/postgresql12/bin:$PATH\nsource ~/.profile\n")])])]),s("p",[t._v("PostgreSQL can only performed via "),s("code",[t._v("postgres")]),t._v(" user. Let's switch the user.")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo su postgres\n")])])]),s("p",[t._v("Check the version:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sh-3.2$ psql --version\npsql (PostgreSQL) 12.4\n")])])]),s("p",[t._v("Show databases:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("psql -l\n")])])]),s("p",[t._v("You will see a prompt from postgres:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('sh-3.2$ psql\npsql (12.4)\nType "help" for help.\n\npostgres=#\n')])])]),s("p",[t._v("Here you can type a query to see that the server is running.")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("postgres=# SELECT setting FROM pg_settings WHERE name='data_directory';\n")])])]),s("p",[t._v("And see the response:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("                 setting\n------------------------------------------\n /opt/local/var/db/postgresql12/defaultdb\n(1 row)\n\npostgres=#\n")])])]),s("p",[t._v("Congratulations! You now have a running PostgreSQL instance on OS/X.")]),t._v(" "),s("h2",{attrs:{id:"use"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#use"}},[t._v("#")]),t._v(" Use")]),t._v(" "),s("p",[t._v("Create database:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("createdb db_name\n")])])]),s("p",[t._v("Choose the database:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("psql db_name\n")])])]),s("p",[t._v("Create table:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("create table users (name varchar(20));\n")])])]),s("p",[t._v("Check tables:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("db_name=# \\dt\n         List of relations\n Schema | Name  | Type  |  Owner\n--------+-------+-------+----------\n public | users | table | postgres\n(1 row)\n")])])]),s("p",[t._v("Select target table:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('db_name=# \\d users\n                      Table "public.users"\n Column |         Type          | Collation | Nullable | Default\n--------+-----------------------+-----------+----------+---------\n name   | character varying(20) |           |          |\n')])])]),s("p",[t._v("Delete table:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("db_name=# drop table users;\nDROP TABLE\n")])])]),s("p",[t._v("Import sql file:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('sh-3.2$ psql test\npsql (12.4)\nType "help" for help.\n\ntest=# \\i init.sql\nCREATE TABLE\n')])])]),s("p",[s("a",{attrs:{href:"https://www.postgresql.org/docs/12/datatype.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Data type"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=n.exports}}]);