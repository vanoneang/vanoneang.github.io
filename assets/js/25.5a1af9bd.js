(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{277:function(e,t,r){e.exports=r.p+"assets/img/waterfall-dom-css-js.c90dca52.png"},291:function(e,t,r){},341:function(e,t,r){e.exports=r.p+"assets/img/defer-async.c8777b44.png"},342:function(e,t,r){e.exports=r.p+"assets/img/RAIL.b38ca301.png"},343:function(e,t){e.exports="data:image/png;base64,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"},344:function(e,t,r){"use strict";r(291)},500:function(e,t,r){"use strict";r.r(t);r(344);var a=r(10),n=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"performance"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#performance"}},[e._v("#")]),e._v(" Performance")]),e._v(" "),t("div",{staticClass:"custom"},[t("p",[e._v("How do we actually know where we stand in terms of performance, and what exactly our performance bottlenecks are? Is it expensive JavaScript, slow web font delivery, heavy images, or sluggish rendering? Have we optimized enough with tree-shaking, scope hoisting, code-splitting, and all the fancy loading patterns with intersection observer, progressive hydration, clients hints, HTTP/3 and service workers? And, most importantly, where do we even start improving performance and how do we establish a performance culture long-term?")]),e._v(" "),t("p",[e._v("Back in the day, performance was often a mere "),t("em",[e._v("afterthought")]),e._v(". Often deferred till the very end of the project. Let's list some key points of performance in our front-end area.")]),e._v(" "),t("h2",{attrs:{id:"critical-rendering-path"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#critical-rendering-path"}},[e._v("#")]),e._v(" Critical Rendering Path")]),e._v(" "),t("p",[e._v("Optimizing the critical rendering path allows the browser to paint the page as quickly as possible: faster pages translate into higher engagement, more pages viewed, and improved conversion. To minimize the amount of time a visitor spends viewing a blank screen, we need to optimize which resources are loaded and in which order.")]),e._v(" "),t("p",[e._v("In fact, when we talk about the critical rendering path we are typically talking about the HTML markup, CSS, and JavaScript. Images do not block the initial render of the page—although we should also try to get the images painted as soon as possible. But we also need to know that the "),t("code",[e._v("load")]),e._v(" event (also known as onload), is blocked on the image. The "),t("code",[e._v("onload")]),e._v(" event marks the point at which "),t("strong",[e._v("all resources")]),e._v(" that the page requires have been downloaded and processed.")]),e._v(" "),t("img",{attrs:{src:r(277)}}),e._v(" "),t("p",[e._v("What happened?")]),e._v(" "),t("ul",[t("li",[e._v("We need to fetch and parse the CSS file to construct the CSSOM, and we need both the DOM and CSSOM to build the render tree.")]),e._v(" "),t("li",[e._v("Because the page also contains a parser blocking JavaScript file, the "),t("code",[e._v("domContentLoaded")]),e._v(" event is blocked until the CSS file is downloaded and parsed: because the JavaScript might query the CSSOM, we must block the CSS file until it downloads before we can execute JavaScript.")])]),e._v(" "),t("p",[e._v("But there are several strategies that can make our page render faster.")]),e._v(" "),t("h3",{attrs:{id:"deferred-scripts-vs-asynchronous-scripts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deferred-scripts-vs-asynchronous-scripts"}},[e._v("#")]),e._v(" Deferred Scripts VS Asynchronous Scripts")]),e._v(" "),t("p",[e._v("Setting the "),t("code",[e._v("defer")]),e._v(" attribute on a "),t("code",[e._v("<script>")]),e._v(" element signals to the browser that download should begin immediately but execution should be deferred.")]),e._v(" "),t("p",[e._v("Even though the "),t("code",[e._v("<script>")]),e._v(" elements are included in the document "),t("code",[e._v("<head>")]),e._v(", they will not be executed until after the browser has received the closing "),t("code",[e._v("</html>")]),e._v(" tag.")]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("async")]),e._v(" attribute is similar to "),t("code",[e._v("defer")]),e._v(" in that it changes the way the script is processed. Also similar to "),t("code",[e._v("defer")]),e._v(", "),t("code",[e._v("async")]),e._v(" applies only to external scripts and signals the browser to begin downloading the file immediately. Unlike "),t("code",[e._v("defer")]),e._v(", scripts marked as "),t("code",[e._v("async")]),e._v(" are "),t("em",[e._v("not guaranteed to execute in the order")]),e._v(" in which they are specified. The second script file might execute before the first, so it’s important that there are no dependencies between the two. "),t("strong",[e._v("It’s recommended that asynchronous scripts not modify the DOM as they are loading.")])]),e._v(" "),t("img",{attrs:{src:r(341)}}),e._v(" "),t("h2",{attrs:{id:"measure-performance-with-the-rail-model"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#measure-performance-with-the-rail-model"}},[e._v("#")]),e._v(" Measure performance with the RAIL model")]),e._v(" "),t("p",[e._v("RAIL is a "),t("code",[e._v("user-centric")]),e._v("(以用户为中心) performance model that provides a structure for thinking about performance. RAIL stands for four distinct aspects of web app life cycle: response, animation, idle(空闲), and load.")]),e._v(" "),t("img",{attrs:{src:r(342)}}),e._v(" "),t("ol",[t("li",[t("strong",[e._v("Response: process events in under 50ms")])])]),e._v(" "),t("p",[e._v("Goal: Complete a transition initiated by user input within 100 ms, so users feel like the interactions are instantaneous. (在 100 毫秒内完成由用户输入启动的转换，让用户感觉交互是即时的。)")]),e._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[t("strong",[e._v("Animation: produce a frame in 10 ms")])])]),e._v(" "),t("p",[e._v("Produce each frame in an animation in 10 ms or less. Technically, the maximum budget for each frame is 16 ms (1000 ms / 60 frames per second ≈ 16 ms), but browsers need about 6 ms to render each frame, hence the guideline of 10 ms per frame.")]),e._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[t("strong",[e._v("Idle: maximize idle time")])])]),e._v(" "),t("p",[e._v("Use idle time to complete deferred work. For example, for the initial page load, load as little data as possible, then use idle time to load the rest. Sites that load quickly have longer average sessions, lower bounce rates, and higher ad viewability. For subsequent loads, a good target is to load the page in under 2 seconds.")]),e._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[t("strong",[e._v("Load: deliver content and become interactive in under 5 seconds")])])]),e._v(" "),t("p",[e._v("When pages load slowly, user attention wanders, and users perceive the task as broken.")]),e._v(" "),t("h2",{attrs:{id:"debounce-throttle-and-requestanimationframe"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#debounce-throttle-and-requestanimationframe"}},[e._v("#")]),e._v(" Debounce, Throttle and requestAnimationFrame")]),e._v(" "),t("p",[e._v("Having a debounced or throttled version of our function is especially useful when we are attaching the function to a DOM event. Why? Because we are giving ourselves "),t("em",[e._v("a layer of control between the event and the execution of the function")]),e._v(". Remember, we don’t control how often those DOM events are going to be emitted. But it can be changed.")]),e._v(" "),t("ul",[t("li",[e._v("Debounce")])]),e._v(" "),t("p",[e._v('The Debounce technique allow us to "group" multiple sequential calls in a single one.')]),e._v(" "),t("p",[e._v("Imagine you are in an elevator. The doors begin to close, and suddenly another person tries to get on. The elevator doesn’t begin its function to change floors, the doors open again. Now it happens again with another person. The elevator is delaying its function (moving floors), but optimizing its resources.")]),e._v(" "),t("img",{attrs:{src:r(343)}}),e._v(" "),t("ul",[t("li",[e._v("Throttle")])]),e._v(" "),t("p",[e._v("By using _.throttle, we don’t allow to our function to execute more than once every X milliseconds.")]),e._v(" "),t("p",[e._v("The main difference between this and debouncing is that "),t("strong",[e._v("throttle")]),e._v(" guarantees the execution of the function "),t("strong",[e._v("regularly")]),e._v(", at least every X milliseconds.")]),e._v(" "),t("ul",[t("li",[e._v("requestAnimationFrame (rAF)")])]),e._v(" "),t("p",[t("code",[e._v("requestAnimationFrame")]),e._v(" is another way of rate-limiting the execution of a function.")]),e._v(" "),t("p",[e._v("It can be thought as a "),t("code",[e._v("_.throttle(dosomething, 16)")]),e._v(". But with a much higher fidelity, since it’s a browser native API that aims for better accuracy.")]),e._v(" "),t("RightMenu"),e._v(" "),t("h2",{attrs:{id:"reference"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reference"}},[e._v("#")]),e._v(" Reference")]),e._v(" "),t("p",[e._v("[1] "),t("a",{attrs:{href:"https://www.smashingmagazine.com/2021/01/front-end-performance-2021-free-pdf-checklist/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Front-End Performance Checklist 2021"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("[2] "),t("a",{attrs:{href:"https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp",target:"_blank",rel:"noopener noreferrer"}},[e._v("Analyzing Critical Rendering Path Performance"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("[3] "),t("a",{attrs:{href:"https://web.dev/rail/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Measure performance with the RAIL model"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("[4] "),t("a",{attrs:{href:"https://developers.google.com/web/tools/lighthouse",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lighthouse"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("[5] "),t("a",{attrs:{href:"https://css-tricks.com/debouncing-throttling-explained-examples/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Debouncing and Throttling Explained Through Examples"),t("OutboundLink")],1)])],1)])}),[],!1,null,null,null);t.default=n.exports}}]);